<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Vo√ªte d'Ana√Øs ‚Äî Editor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="app-container">

        <header class="top-nav">
            <div>
                <h1 class="brand-title">La Vo√ªte <span class="brand-accent">d'Ana√Øs</span></h1>
                <span class="brand-sub">Pipeline Literario ¬∑ 7 Agentes</span>
            </div>
            <div class="progress-tracker">
                <span class="step active" id="step-0">Premisa</span>
                <span class="step-divider">‚Ä∫</span>
                <span class="step" id="step-1">Arco</span>
                <span class="step-divider">‚Ä∫</span>
                <span class="step" id="step-2">Personajes</span>
                <span class="step-divider">‚Ä∫</span>
                <span class="step" id="step-3">Escritura</span>
                <span class="step-divider">‚Ä∫</span>
                <span class="step" id="step-4">Cr√≠tica</span>
                <span class="step-divider">‚Ä∫</span>
                <span class="step" id="step-5">Edici√≥n</span>
                <span class="step-divider">‚Ä∫</span>
                <span class="step" id="step-6">M√©tricas</span>
            </div>
        </header>

        <main class="workspace">
            <aside class="agent-panel">
                <div class="agent-card active" id="card-0">
                    <div class="agent-icon">üß†</div>
                    <div class="agent-info">
                        <h3>El Ideador</h3>
                        <span class="model-tag">dolphin-mistral:7b üîì</span>
                        <small>SIN CENSURA ‚Äî Desarrolla la premisa y define fetiches.</small>
                    </div>
                </div>
                <div class="agent-card" id="card-1">
                    <div class="agent-icon">üìê</div>
                    <div class="agent-info">
                        <h3>El Arquitecto</h3>
                        <span class="model-tag">qwen2.5:7b</span>
                        <small>Estructura el arco argumental y el cl√≠max.</small>
                    </div>
                </div>
                <div class="agent-card" id="card-2">
                    <div class="agent-icon">üé≠</div>
                    <div class="agent-info">
                        <h3>Los Personajes</h3>
                        <span class="model-tag">dolphin-mistral:7b üîì</span>
                        <small>SIN CENSURA ‚Äî Fichas con fetiches y transformaci√≥n.</small>
                    </div>
                </div>
                <div class="agent-card" id="card-3">
                    <div class="agent-icon">‚úçÔ∏è</div>
                    <div class="agent-info">
                        <h3>El Escritor</h3>
                        <span class="model-tag">dolphin-llama3:8b üîì</span>
                        <small>SIN CENSURA ‚Äî Prosa er√≥tica expl√≠cita. M√≠n 3000 palabras.</small>
                    </div>
                </div>
                <div class="agent-card" id="card-4">
                    <div class="agent-icon">üîç</div>
                    <div class="agent-info">
                        <h3>El Cr√≠tico</h3>
                        <span class="model-tag">qwen2.5:7b</span>
                        <small>Eval√∫a tensi√≥n, ritmo y sensorialidad.</small>
                    </div>
                </div>
                <div class="agent-card" id="card-5">
                    <div class="agent-icon">‚úÇÔ∏è</div>
                    <div class="agent-info">
                        <h3>El Editor</h3>
                        <span class="model-tag">dolphin-llama3:8b üîì</span>
                        <small>SIN CENSURA ‚Äî Reescritura expl√≠cita manteniendo la voz.</small>
                    </div>
                </div>
                <div class="agent-card" id="card-6">
                    <div class="agent-icon">üìä</div>
                    <div class="agent-info">
                        <h3>El Contador</h3>
                        <span class="model-tag">llama3.2:3b</span>
                        <small>Verifica extensi√≥n y formato final.</small>
                    </div>
                </div>
            </aside>

            <section class="editor-area">
                <div class="input-section">
                    <label for="user-prompt" id="prompt-label">Tu premisa oscura</label>
                    <textarea id="user-prompt"
                        placeholder="Una mujer descubre que su espejo inteligente le est√° robando su vocabulario y reduciendo sus pensamientos a est√≠mulos sexuales cada vez que se desnuda frente a √©l..."></textarea>
                </div>

                <div class="action-bar">
                    <div class="streaming-indicator hidden" id="stream-status">
                        <div class="streaming-dot"></div>
                        <span id="stream-agent-name">El Ideador est√° escribiendo...</span>
                        <span class="token-counter" id="token-count">0 tokens</span>
                    </div>
                    <button id="btn-stop" class="danger-btn hidden">‚ñ† Detener</button>
                    <button id="btn-generate" class="primary-btn">
                        <span class="btn-text">Invocar al Ideador</span>
                        <div class="loader hidden"></div>
                    </button>
                </div>

                <div class="output-section">
                    <label>Respuesta del agente <small>(editable)</small></label>
                    <textarea id="agent-output"
                        placeholder="El texto del agente aparecer√° aqu√≠, token por token, mientras piensa. Puedes editarlo antes de aprobarlo."></textarea>
                </div>

                <div class="checkpoint-actions hidden" id="checkpoint-controls">
                    <button id="btn-save" class="save-btn">üíæ Guardar</button>
                    <button id="btn-reject" class="danger-btn">‚Üª Re-generar</button>
                    <button id="btn-approve" class="success-btn">Aprobar & Continuar ‚Üí</button>
                </div>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>